---
title: 202. 快乐数
category: LeetCode
tag:
  - 哈希表
date: 2023-04-02
---

## 题目链接

- [202. 快乐数](https://leetcode.cn/problems/happy-number/)

## 题目描述 <Badge text="简单" type="tip"/>

编写一个算法来判断一个数 n 是不是快乐数。

「快乐数」定义为：对于一个正整数，每一次将该数替换为它每个位置上的数字的平方和，然后重复这个过程直到这个数变为 1，也可能是无限循环但始终变不到 1。如果可以变为 1，那么这个数就是快乐数。

如果 n 是快乐数就返回 True；不是，则返回 False。

示例：

```
输入：n = 19
输出：true
解释：
12 + 92 = 82
82 + 22 = 68
62 + 82 = 100
12 + 02 + 02 = 1
```

## 解题思路

1. 理论推理：

首先实验不同位数数字的最大值，平方后的情况：

| Digits |    Largest    | Next |
| ------ | :-----------: | ---: |
| 1      |       9       |   81 |
| 2      |      99       |  162 |
| 3      |      999      |  243 |
| 4      |     9999      |  324 |
| 13     | 9999999999999 | 1053 |

由数据可以看出，在 3 位数时，总是小于 243；超过 3 位数，平方后数据位数会变小直至小于 243。

2. 算法设计

我们可以对输入进行题述的运算，然后使用 Set 来统计已经经过运算的数字；

- 如果得到运算结果为 1，则是快乐数；
- 如果得到一个已经经过运算的数字，则进入了循环，不是快乐数。

## 示例代码

```java
class Solution {
    public boolean isHappy(int n) {
        Set<Integer> set = new HashSet();
        while (n != 1 && !set.contains(n)) {
            set.add(n);
            n = func(n);
        }
        return n == 1;
    }

    public int func(int n) {
        int sum = 0;
        while (n > 0) {
            int d = n % 10;
            n = n / 10;
            sum += d*d;
        }
        return sum;
    }
}
```


## 复杂度分析

- 时间复杂度：O(logn)
- 空间复杂度：O(logn)