---
title: 安装 ElasticSearch 和 IK 分词插件
category: ElasticSearch
date: 2023-06-09
---

## Docker 安装

1. 拉取镜像

```bash
docker pull docker.elastic.co/elasticsearch/elasticsearch
```

2. 创建网络

```bash
docker network create elastic
```

3. 启动 ElasticSearch 容器 (单节点模式)

**示例 1**：不挂载目录

::: code-tabs
@tab 多行命令
```bash
docker run -d\ 
   --name elasticsearch\ 
   --net elastic\ 
   -p 9200:9200 -p 9300:9300\ 
   -e "discovery.type=single-node"\ 
   docker.elastic.co/elasticsearch/elasticsearch:8.7.1
```

@tab 单行命令
```bash
docker run -d --name elasticsearch --net elastic -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" docker.elastic.co/elasticsearch/elasticsearch:8.7.1
```
:::

**示例 2**：挂载 `elasticsearch.yml` 到宿主机，需要先在宿主机目录创建该文件，文件内容为：

```yaml
network.host: 0.0.0.0
xpack.security.enabled: false
xpack.security.enrollment.enabled: false
xpack.security.http.ssl.enabled: false
xpack.security.transport.ssl.enabled: false
```

:::tip
该配置文件中，`network.host: 0.0.0.0` 表示允许所有主机访问；其他的为关闭安全模块，否则通过 rest 请求 es 时需要先认证。
:::

启动命令：

::: code-tabs
@tab 多行命令
```bash
docker run -d\ 
   --name elasticsearch\ 
   --net elastic\ 
   -p 9200:9200 -p 9300:9300\ 
   -e "discovery.type=single-node"\ 
   -v D:/Docker/elasticsearch/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml\ 
   docker.elastic.co/elasticsearch/elasticsearch:8.7.1
```

@tab 单行命令
```bash
docker run -d --name elasticsearch --net elastic -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" -v D:/Docker/elasticsearch/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml docker.elastic.co/elasticsearch/elasticsearch:8.7.1
```
:::


**示例 3**：挂载配置文件、数据目录、插件目录到到宿主机

::: code-tabs
@tab 多行命令
```bash
docker run -d\ 
   --name elasticsearch\ 
   --net elastic\ 
   -p 9200:9200 -p 9300:9300\ 
   -e "discovery.type=single-node"\ 
   -v D:/Docker/elasticsearch/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml\ 
   -v D:/Docker/elasticsearch/data:/usr/share/elasticsearch/data\ 
   -v D:/Docker/elasticsearch/plugins:/usr/share/elasticsearch/plugins\ 
   docker.elastic.co/elasticsearch/elasticsearch:8.7.1
```

@tab 单行命令
```bash
docker run -d --name elasticsearch --net elastic -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" -v D:/Docker/elasticsearch/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml -v D:/Docker/elasticsearch/data:/usr/share/elasticsearch/data -v D:/Docker/elasticsearch/plugins:/usr/share/elasticsearch/plugins docker.elastic.co/elasticsearch/elasticsearch:8.7.1
```
:::

4. 测试安装是否成功

打开 `http://localhost:9200/`，替换为实际 ip，如果出现以下结果则表示安装成功：

```json
{
    "name": "8a7e8567288b",
    "cluster_name": "docker-cluster",
    "cluster_uuid": "Umutb_ouTpi78k9_FcbJkg",
    "version": {
        "number": "8.7.1",
        "build_flavor": "default",
        "build_type": "docker",
        "build_hash": "f229ed3f893a515d590d0f39b05f68913e2d9b53",
        "build_date": "2023-04-27T04:33:42.127815583Z",
        "build_snapshot": false,
        "lucene_version": "9.5.0",
        "minimum_wire_compatibility_version": "7.17.0",
        "minimum_index_compatibility_version": "7.0.0"
    },
    "tagline": "You Know, for Search"
}
```

## 安装 IK 分词插件



