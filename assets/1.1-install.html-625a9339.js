import{_ as u,W as d,X as k,a0 as n,a2 as l,Z as a,$ as s,a1 as e,C as c}from"./framework-ea95e8eb.js";const m={},v=e(`<h2 id="docker-安装" tabindex="-1"><a class="header-anchor" href="#docker-安装" aria-hidden="true">#</a> Docker 安装</h2><ol><li>拉取镜像</li></ol><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull elasticsearch:7.17.7
</code></pre></div><ol start="2"><li>创建网络（方便与其他组件例如 kibana 连接）</li></ol><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> network create elastic
</code></pre></div><ol start="3"><li>启动 ElasticSearch 容器 (单节点模式)</li></ol><p>（可选）挂载 <code>elasticsearch.yml</code>、数据目录、插件目录到宿主机，需要先在宿主机目录创建该文件，文件内容为：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># 表示允许所有主机访问</span>
<span class="token key atrule">network.host</span><span class="token punctuation">:</span> 0.0.0.0
<span class="token comment"># 关闭安全模块（8.x 版本才添加）</span>
<span class="token key atrule">xpack.security.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
<span class="token key atrule">xpack.security.enrollment.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
<span class="token key atrule">xpack.security.http.ssl.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
<span class="token key atrule">xpack.security.transport.ssl.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8),b=a("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[a("pre",{class:"language-bash"},[a("code",null,[a("span",{class:"token function"},"docker"),s(" run -d"),a("span",{class:"token punctuation"},"\\"),s(` 
   `),a("span",{class:"token parameter variable"},"--name"),s(" elasticsearch"),a("span",{class:"token punctuation"},"\\"),s(` 
   `),a("span",{class:"token parameter variable"},"--net"),s(" elastic"),a("span",{class:"token punctuation"},"\\"),s(` 
   `),a("span",{class:"token parameter variable"},"-p"),s(),a("span",{class:"token number"},"9200"),s(":9200 "),a("span",{class:"token parameter variable"},"-p"),s(),a("span",{class:"token number"},"9300"),s(":9300"),a("span",{class:"token punctuation"},"\\"),s(` 
   `),a("span",{class:"token parameter variable"},"-e"),s(),a("span",{class:"token string"},'"discovery.type=single-node"'),a("span",{class:"token punctuation"},"\\"),s(` 
   `),a("span",{class:"token parameter variable"},"-v"),s(" D:/Docker/elasticsearch/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml"),a("span",{class:"token punctuation"},"\\"),s(` 
   `),a("span",{class:"token parameter variable"},"-v"),s(" D:/Docker/elasticsearch/data:/usr/share/elasticsearch/data"),a("span",{class:"token punctuation"},"\\"),s(` 
   `),a("span",{class:"token parameter variable"},"-v"),s(" D:/Docker/elasticsearch/plugins:/usr/share/elasticsearch/plugins"),a("span",{class:"token punctuation"},"\\"),s(` 
   elasticsearch:7.17.7  
`)])]),a("div",{class:"line-numbers","aria-hidden":"true"},[a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"})])],-1),h=a("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[a("pre",{class:"language-bash"},[a("code",null,[a("span",{class:"token comment"},"# 不挂载"),s(`
`),a("span",{class:"token function"},"docker"),s(" run "),a("span",{class:"token parameter variable"},"-d"),s(),a("span",{class:"token parameter variable"},"--name"),s(" elasticsearch "),a("span",{class:"token parameter variable"},"--net"),s(" elastic "),a("span",{class:"token parameter variable"},"-p"),s(),a("span",{class:"token number"},"9200"),s(":9200 "),a("span",{class:"token parameter variable"},"-p"),s(),a("span",{class:"token number"},"9300"),s(":9300 "),a("span",{class:"token parameter variable"},"-e"),s(),a("span",{class:"token string"},'"discovery.type=single-node"'),s(),a("span",{class:"token parameter variable"},"-e"),s(),a("span",{class:"token assign-left variable"},"ES_JAVA_OPTS"),a("span",{class:"token operator"},"="),a("span",{class:"token string"},'"-Xms512m -Xmx512m"'),s(` elasticsearch:7.17.7

`),a("span",{class:"token comment"},"# 挂载"),s(`
`),a("span",{class:"token function"},"docker"),s(" run "),a("span",{class:"token parameter variable"},"-d"),s(),a("span",{class:"token parameter variable"},"--name"),s(" elasticsearch "),a("span",{class:"token parameter variable"},"--net"),s(" elastic "),a("span",{class:"token parameter variable"},"-p"),s(),a("span",{class:"token number"},"9200"),s(":9200 "),a("span",{class:"token parameter variable"},"-p"),s(),a("span",{class:"token number"},"9300"),s(":9300 "),a("span",{class:"token parameter variable"},"-e"),s(),a("span",{class:"token string"},'"discovery.type=single-node"'),s(),a("span",{class:"token parameter variable"},"-e"),s(),a("span",{class:"token assign-left variable"},"ES_JAVA_OPTS"),a("span",{class:"token operator"},"="),a("span",{class:"token string"},'"-Xms512m -Xmx512m"'),s(),a("span",{class:"token parameter variable"},"-v"),s(" D:/Docker/elasticsearch/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml "),a("span",{class:"token parameter variable"},"-v"),s(" D:/Docker/elasticsearch/data:/usr/share/elasticsearch/data "),a("span",{class:"token parameter variable"},"-v"),s(` D:/Docker/elasticsearch/plugins:/usr/share/elasticsearch/plugins elasticsearch:7.17.7
`)])]),a("div",{class:"line-numbers","aria-hidden":"true"},[a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"})])],-1),g=e(`<div class="hint-container tip"><p class="hint-container-title">提示</p><p>直接启动 es 时，大概会占用宿主机 4G 的内存，可以通过指定 docker 容器的内存限制来减少 es 实例的内存开销，适用于开发环境：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token parameter variable">-e</span> <span class="token assign-left variable">ES_JAVA_OPTS</span><span class="token operator">=</span><span class="token string">&quot;-Xms512m -Xmx512m&quot;</span>
</code></pre></div></div><ol start="4"><li>测试安装是否成功</li></ol><p>打开 <code>http://localhost:9200/</code>，替换为实际 ip，如果出现以下结果则表示安装成功：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;f62e736ae7b6&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;cluster_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elasticsearch&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;cluster_uuid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;diScjh5mT3O6q6w08euNjA&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7.17.7&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;build_flavor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;build_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;docker&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;build_hash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;c01029875a091076ed42cdb3a41c10b1a9a5a20f&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;build_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-05-23T17:16:07.179039820Z&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;build_snapshot&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;lucene_version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;9.6.0&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;minimum_wire_compatibility_version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7.17.0&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;minimum_index_compatibility_version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7.0.0&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tagline&quot;</span><span class="token operator">:</span> <span class="token string">&quot;You Know, for Search&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="安装-ik-分词插件" tabindex="-1"><a class="header-anchor" href="#安装-ik-分词插件" aria-hidden="true">#</a> 安装 ik 分词插件</h2>`,5),_={href:"https://github.com/medcl/elasticsearch-analysis-ik",target:"_blank",rel:"noopener noreferrer"},q=a("p",null,"安装 ik 有两种方式：",-1),y=a("ol",null,[a("li",null,"本地安装")],-1),f={href:"https://github.com/medcl/elasticsearch-analysis-ik/releases",target:"_blank",rel:"noopener noreferrer"},x=e(`<p><img src="https://cdn.staticaly.com/gh/AlexChen68/OSS@master/images/1686302638366.png" alt="ik 版本" loading="lazy"></p><ol start="2"><li>URL 安装</li></ol><p>直接用 <code>elasticsearch-plugin install</code> 命令从网络下载并安装，示例：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 进入容器</span>
 <span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> container_id <span class="token function">bash</span>

<span class="token comment"># 安装 ik 插件</span>
/usr/share/elasticsearch/bin/elasticsearch-plugin <span class="token function">install</span> https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.17.7/elasticsearch-analysis-ik-7.17.7.zip
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>安装完成后，都需要重启 ElasticSearch</p></div><h2 id="浏览器插件" tabindex="-1"><a class="header-anchor" href="#浏览器插件" aria-hidden="true">#</a> 浏览器插件</h2><p>在浏览器中有一个插件 <code>ES-client</code>，可以很方便的从网页查看 es 的索引、数据等等，在浏览器扩展商店搜索 <code>ES-client</code> 即可，使用效果如下：</p><p><img src="https://cdn.staticaly.com/gh/AlexChen68/OSS@master/images/1686308053401.png" alt="" loading="lazy"></p><h2 id="docker-安装-kibana" tabindex="-1"><a class="header-anchor" href="#docker-安装-kibana" aria-hidden="true">#</a> Docker 安装 kibana</h2><p>kibana 也是 elastic 公司的产品，Kibana 能够以图表的形式呈现数据，并且具有可扩展的用户界面，可以全方位的配置和管理 ElasticSearch。</p><p>这里还是介绍 Docker 安装 Kibana 的步骤：</p><ol><li>拉取镜像，注意与 ElasticSearch 版本一致</li></ol><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull kibana:7.17.7
</code></pre></div><ol start="2"><li>启动容器，连接 ElasticSearch 的网络组</li></ol><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> kibana <span class="token parameter variable">--net</span> elastic <span class="token parameter variable">-p</span> <span class="token number">5601</span>:5601 kibana:7.17.7
</code></pre></div>`,15);function S(D,E){const o=c("CodeTabs"),t=c("ExternalLinkIcon");return d(),k("div",null,[v,n(o,{id:"30",data:[{title:"多行命令"},{title:"单行命令"}]},{tab0:l(({title:i,value:r,isActive:p})=>[b]),tab1:l(({title:i,value:r,isActive:p})=>[h]),_:1}),g,a("p",null,[a("a",_,[s("elasticsearch-analysis-ik"),n(t)]),s(" 是一个 elasticsearch 分词插件，由于 es 对中文分词的支持并不完善，通常，我们会使用它来支持更好的中文分词。")]),q,y,a("p",null,[s("在 elasticsearch 工作目录的 plugins 文件夹下面新建文件夹 ik，从这里下载："),a("a",f,[s("ClickHere"),n(t)]),s(" 下载对应版本的压缩包，并解压到 ik 文件夹下，注意版本到对应，版本对应关系如下：")]),x])}const C=u(m,[["render",S],["__file","1.1-install.html.vue"]]);export{C as default};
