import{_ as a,W as e,X as s,a1 as n}from"./framework-ea95e8eb.js";const r={},i=n(`<h2 id="_1-0-kafka-简介" tabindex="-1"><a class="header-anchor" href="#_1-0-kafka-简介" aria-hidden="true">#</a> 1.0 Kafka 简介</h2><p>Kafka 是一个分布式、分区的、多副本的、多订阅者，基于 zookeeper 协调的分布式日志系统，可作为消息中间件。</p><p>sudo yum-config-manager <br> --add-repo <br> https://download.docker.com/linux/centos/docker-ce.repo</p><h3 id="_1-1-核心概念" tabindex="-1"><a class="header-anchor" href="#_1-1-核心概念" aria-hidden="true">#</a> 1.1 核心概念</h3><ul><li>Producer：生产者，发送消息的一方。生产者负责创建消息，然后将其发送到 Kafka。</li><li>Consumer：消费者，接受消息的一方。消费者连接到 Kafka 上并接收消息，进而进行相应的业务逻辑处理。</li><li>Consumer Group：一个消费者组可以包含一个或多个消费者。使用多分区 + 多消费者方式可以极大提高数据下游的处理速度，同一消费组中的消费者不会重复消费消息，同样的，不同消费组中的消费者消息消息时互不影响。Kafka 就是通过消费组的方式来实消息 P2P 模式和广播模式。</li><li>Broker：服务代理节点。Broker 是 Kafka 的服务节点，即 Kafka 的服务器。</li><li>Topic：Kafka 中的消息以 Topic 为单位进行划分，生产者将消息发送到特定的 Topic，而消费者负责订阅 Topic 的消息并进行消费。</li><li>Partition：Topic 是一个逻辑的概念，它可以细分为多个分区，每个分区只属于单个主题。同一个主题下不同分区包含的消息是不同的，分区在存储层面可以看作一个可追加的日志（Log）文件，消息在被追加到分区日志文件的时候都会分配一个特定的偏移量 offset）。</li><li>Offset：offset 是消息在分区中的唯一标识，Kafka 通过它来保证消息在分区内的顺序性，不过 offset 并不跨越分区，也就是说，Kafka 保证的是分区有序性而不是主题有序性。</li><li>Replication：副本，是 Kafka 保证数据高可用的方式，Kafka 同一 Partition 的数据可以在多 Broker 上存在多个副本，通常只有主副本对外提供读写服务，当主副本所在 broker 崩溃或发生网络异常，Kafka 会在 Controller 的管理下会重新选择新的 Leader 副对外提供读写服务。</li><li>Record：实际写入 Kafka 中并可以被读取的消息记录。每个 record 包含了 key、value 和 timestamp。</li></ul><h3 id="_1-2-优缺点" tabindex="-1"><a class="header-anchor" href="#_1-2-优缺点" aria-hidden="true">#</a> 1.2 优缺点</h3><p>Kafka 是一个分布式流处理平台，具有以下优点：</p><ul><li>高吞吐量和可伸缩性：Kafka 可以处理每秒数百万条消息，并且可以通过添加更多的节点轻松扩展。</li><li>高容错性：Kafka 使用分布式复制机制来保证数据的可靠性和持久性，即使其中一些节点失败也不会造成数据丢失。</li><li>高性能：Kafka 采用了顺序读写磁盘的方式进行消息存储，具有较低的延迟和高吞吐量。</li><li>支持多种消费者：Kafka 的消费者模型支持同时有多个消费者组订阅同一个主题，并且可以准确地跟踪每个消费者在主题中的消费进度。</li></ul><p>尽管 Kafka 具有许多优点，但它也有一些缺点：</p><ul><li>复杂性：配置和管理 Kafka 集群可能需要一定的技术知识和经验。对于新手来说，上手可能会有一定的学习曲线。</li><li>存储需求较高：由于 Kafka 默认将所有消息持久化到磁盘上，所以需要相应的存储空间。如果消息量很大，存储需求可能会变得很高。</li><li>无法直接修改数据：一旦消息被写入 Kafka，就无法直接修改它们。如果需要更改消息内容，只能通过写入新的消息来实现。</li><li>API 稳定性变化：Kafka 的 API 在不同版本之间可能会发生一些变化，这可能导致升级和兼容性方面的挑战。</li></ul><p>综上所述，Kafka 是一种高性能、可伸缩、可靠的分布式流处理平台，但在配置和管理上有一定的复杂性，并且需要额外的存储空间。</p><h2 id="_2-0-docker-安装-kafka" tabindex="-1"><a class="header-anchor" href="#_2-0-docker-安装-kafka" aria-hidden="true">#</a> 2.0 Docker 安装 Kafka</h2><h3 id="_2-1-创建网络" tabindex="-1"><a class="header-anchor" href="#_2-1-创建网络" aria-hidden="true">#</a> 2.1 创建网络</h3><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> network create kafka <span class="token parameter variable">--driver</span> bridge
</code></pre></div><h3 id="_2-2-安装-zookeeper" tabindex="-1"><a class="header-anchor" href="#_2-2-安装-zookeeper" aria-hidden="true">#</a> 2.2 安装 Zookeeper</h3><p>Kafka 依赖 Zookeeper 所以需要先安装 Zookeeper</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> zookeeper <span class="token parameter variable">--network</span> kafka <span class="token parameter variable">-e</span> <span class="token assign-left variable">ALLOW_ANONYMOUS_LOGIN</span><span class="token operator">=</span>yes bitnami/zookeeper:latest
</code></pre></div><h3 id="_2-3-安装-kafka" tabindex="-1"><a class="header-anchor" href="#_2-3-安装-kafka" aria-hidden="true">#</a> 2.3 安装 Kafka</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> kafka <span class="token punctuation">\\</span>
  <span class="token parameter variable">--network</span> kafka <span class="token punctuation">\\</span>
  <span class="token parameter variable">-p</span> <span class="token number">9092</span>:9092 <span class="token punctuation">\\</span>
  <span class="token parameter variable">-e</span> <span class="token assign-left variable">ALLOW_PLAINTEXT_LISTENER</span><span class="token operator">=</span>yes <span class="token punctuation">\\</span>
  <span class="token parameter variable">-e</span> <span class="token assign-left variable">KAFKA_CFG_ZOOKEEPER_CONNECT</span><span class="token operator">=</span>zookeeper:2181 <span class="token punctuation">\\</span>
  <span class="token parameter variable">-e</span> <span class="token assign-left variable">KAFKA_CFG_ADVERTISED_LISTENERS</span><span class="token operator">=</span>PLAINTEXT://192.168.0.100:9092 <span class="token punctuation">\\</span>
  bitnami/kafka:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4-安装-kafka-map-图形化管理工具-可选" tabindex="-1"><a class="header-anchor" href="#_2-4-安装-kafka-map-图形化管理工具-可选" aria-hidden="true">#</a> 2.4 安装 kafka-map 图形化管理工具（可选）</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> kafka-map <span class="token punctuation">\\</span>
  <span class="token parameter variable">--network</span> kafka <span class="token punctuation">\\</span>
  <span class="token parameter variable">-p</span> <span class="token number">9093</span>:8080 <span class="token punctuation">\\</span>
  <span class="token parameter variable">-v</span> D:/Docker/kafka-map/data:/usr/local/kafka-map/data <span class="token punctuation">\\</span>
  <span class="token parameter variable">-e</span> <span class="token assign-left variable">DEFAULT_USERNAME</span><span class="token operator">=</span>admin <span class="token punctuation">\\</span>
  <span class="token parameter variable">-e</span> <span class="token assign-left variable">DEFAULT_PASSWORD</span><span class="token operator">=</span>admin <span class="token punctuation">\\</span>
  <span class="token parameter variable">--restart</span> always dushixiang/kafka-map:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,21),l=[i];function p(t,o){return e(),s("div",null,l)}const k=a(r,[["render",p],["__file","kafka.html.vue"]]);export{k as default};
