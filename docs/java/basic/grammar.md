---
title: Java 基础语法
order: 1
date: 2023-04-12
---

## Java 三大特性

Java 具有三大特性，分别是**封装**、**继承**和**多态**。

**封装**

利用抽象数据类型将数据和基于数据的操作封装在一起，使其构成一个不可分割的独立实体。数据被保护在抽象数据类型的内部，尽可能地隐藏内部的细节，只保留一些对外接口使之与外部发生联系。用户无需知道对象内部的细节，但可以通过对象对外提供的接口来访问该对象。

优点：

- 减少耦合：可以独立地开发、测试、优化、使用、理解和修改
- 减轻维护的负担：可以更容易被程序员理解，并且在调试的时候可以不影响其他模块
- 有效地调节性能：可以通过剖析确定哪些模块影响了系统的性能
- 提高软件的可重用性
- 降低了构建大型系统的风险：即使整个系统不可用，但是这些独立的模块却有可能是可用的

**继承**

从一个已知的类中派生出一个新的类，新类可以拥有已知类的行为和属性，并且可以通过覆盖/重写来增强已知类的能力。

**多态**

多态分为编译时多态和运行时多态：

- 编译时多态主要指方法的重载
- 运行时多态指程序中定义的对象引用所指向的具体类型在运行期间才确定

运行时多态有三个条件：

- 继承：在多态中必须存在有继承关系的子类和父类。
- 重写：子类对父类中某些方法进行重新定义，在调用这些方法时就会调用子类的方法。
- 向上转型：在多态中需要将子类的引用赋给父类对象，只有这样该引用才能够具备技能调用父类的方法和子类的方法。

## Java 数据类型

Java 中的数据类型可分为 2 种：

1. 基本数据类型。

基本数据类型是 Java 语言操作数据的基础，包括 boolean、char、byte、short、int、long、float 和 double，共 8 种。

2. 引用数据类型。

除了基本数据类型以外的类型，都是所谓的引用类型。常见的有数组（对，没错，数组是引用类型）、class（也就是类），以及接口（指向的是实现接口的类的对象）。

### 八种基本数据类型

::: tip
基本数据类型被创建时，在栈内存中会被划分出一定的内存，并将数值存储在该内存中。

Java 基本类型都有对应的包装类型，基本类型与其对应的包装类型之间的赋值使用自动装箱（转为包装类）与拆箱（转为基本类型）完成。
:::

| 数据类型 | 长度 (位) | 数值范围                    | 默认值         | 缓存池 |
| -------- | ---------| ------------------------------ | ----------- | -------------- |
| boolean  | 1 位    | false/true                        | false       | false 和 true    |
| char     | 16 位  | '\u0000'（0）到 '\uffff'（65535） | \u0000（空格） | \u0000 到 \u007F |
| byte     | 8 位  | -2^7（-128）到 2^7-1（127）        | 0             | 所有字符       |
| short    | 16 位  | -2^15（-32768）到 2^15-1（32767）  | 0             | -128 到 127      |
| int      | 32 位  | -2^31 到 2^31-1                     | 0            | -128 到 127      |
| long     | 64 位  | -2^63 到 2^63-1                     | 0            |       -     |
| float    | 32 位  | -2^128 到 2^128                     | 0.0f         |       -        |
| double   | 64 位  | -2^1024 到 2^1024                   | 0.0d         |       -        |

### 引用数据类型

::: tip
引用数据类型被创建时，首先会在栈内存中分配一块空间，然后在堆内存中也会分配一块具体的空间用来存储数据的具体信息，即 hash 值，然后由栈中引用指向堆中的对象地址。
:::

Java 中的类、接口和数组都是引用数据类型。

### 两种类型的区别

基本数据类型：

1. 变量名指向具体的数值。
2. 基本数据类型存储在**栈**上。

引用数据类型：

1. 变量名指向的是存储对象的内存地址，在**栈**上。
2. 内存地址指向的对象存储在**堆**上。

**堆**是在程序运行时在内存中申请的空间（可理解为动态的过程）；切记，不是在编译时；因此，Java 中的对象就放在这里，这样做的好处就是：

当需要一个对象时，只需要通过 new 关键字写一行代码即可，当执行这行代码时，会自动在内存的“堆”区分配空间——这样就很灵活。

**栈**，能够和处理器（CPU，也就是脑子）直接关联，因此访问速度更快。既然访问速度快，要好好利用啊！Java 就把对象的引用放在栈里。为什么呢？因为引用的使用频率高吗？

不是的，因为 Java 在编译程序时，必须明确的知道存储在栈里的东西的生命周期，否则就没法释放旧的内存来开辟新的内存空间存放引用——空间就那么大，前浪要把后浪拍死在沙滩上啊。

## 数据类型转换

### 自动类型转换

如果以下 2 个条件都满足，那么将一种类型的数据赋给另外一种类型的变量的时候，将会发生自动类型转换（automatic type conversion）。

- 两种数据类型彼此兼容
- 目标类型的取值范围大于源数据类型（低级类型数据转换成高级类型数据）
  - 数值型数据的转换：byte→short→int→long→float→double。  
  - 字符型转换为整型：char→int。

### 强制类型转换

所以当两种数据类型不兼容，或目标类型的取值范围小于源类型时，自动转换将无法进行，这时就需要进行强制类型转换。

其语法格式如下：

```
(type)variableName
```

例如：

```java
int a = 3;
double b = 5.0;
a = (int)b;
```

上述代码中首先将 double 类型变量 b 的值强制转换成 int 类型，然后将值赋给 a，但是变量 b 本身的值是没有发生变化的。

在强制类型转换中，如果是将浮点类型的值转换为整数，直接去掉小数点后边的所有数字；而如果是整数类型强制转换为浮点类型时，将在小数点后面补零。

### int 和 char 类型互转

这里整理一波 int 和 char 类型的互转，它们之间比较特殊。也会在以后的学习当中经常遇到。

1. int 类型的数据可以通过 `(char)` 类型强制、`Character.forDigit()` 方法和 Integer 的 toString() 方法，转换为 char 类型，其转换的映射可通过 ASCII 表查询。

```Java
int a = 65;
System.out.println((char)a); // A
```

2. char 转 int

```java
int a = 'A'; // 65
```

### `int[]` 和 `List<Integer>` 转换

在实际开发中，常常会用到 `int[]` 与 `List<Integer>` 的相互转换。

- `List<Integer>` 转 `int[]`

```java
int[] arr = list.stream().mapToInt(x -> x).toArray();
```

- `int[]` 转 `List<Integer>`

```java
List<Integer> list = Arrays.stream(arr).boxed().collect(Collectors.toList());
```

## 参考资料

- [Java 程序员进阶之路]([https://](https://tobebetterjavaer.com/basic-grammar/type-cast.html))
- [Java 基础 - Java 全栈知识体系](https://pdai.tech/md/java/basic/java-basic-oop.html)